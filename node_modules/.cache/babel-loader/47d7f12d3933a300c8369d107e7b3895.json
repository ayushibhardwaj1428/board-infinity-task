{"ast":null,"code":"import _regeneratorRuntime from\"G:/boardinfinity-task/board-infinity-task/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"G:/boardinfinity-task/board-infinity-task/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"G:/boardinfinity-task/board-infinity-task/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import{initiateGetResult,initiateLoadMoreAlbums,initiateLoadMorePlaylist,initiateLoadMoreArtists}from'../actions/result';import{connect}from'react-redux';import{Redirect}from'react-router-dom';import SearchResult from'./SearchResult';import SearchForm from'./SearchForm';import Header from'./Header';import Loader from'./Loader';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Dashboard=function Dashboard(props){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isLoading=_useState2[0],setIsLoading=_useState2[1];var _useState3=useState('albums'),_useState4=_slicedToArray(_useState3,2),selectedCategory=_useState4[0],setSelectedCategory=_useState4[1];var isValidSession=props.isValidSession,history=props.history;var handleSearch=function handleSearch(searchTerm){if(isValidSession()){setIsLoading(true);props.dispatch(initiateGetResult(searchTerm)).then(function(){setIsLoading(false);setSelectedCategory('albums');});}else{history.push({pathname:'/',state:{session_expired:true}});}};var loadMore=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(type){var dispatch,_albums,_artists,_playlist;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!isValidSession()){_context.next=18;break;}dispatch=props.dispatch,_albums=props.albums,_artists=props.artists,_playlist=props.playlist;setIsLoading(true);_context.t0=type;_context.next=_context.t0==='albums'?6:_context.t0==='artists'?9:_context.t0==='playlist'?12:15;break;case 6:_context.next=8;return dispatch(initiateLoadMoreAlbums(_albums.next));case 8:return _context.abrupt(\"break\",15);case 9:_context.next=11;return dispatch(initiateLoadMoreArtists(_artists.next));case 11:return _context.abrupt(\"break\",15);case 12:_context.next=14;return dispatch(initiateLoadMorePlaylist(_playlist.next));case 14:return _context.abrupt(\"break\",15);case 15:setIsLoading(false);_context.next=19;break;case 18:history.push({pathname:'/',state:{session_expired:true}});case 19:case\"end\":return _context.stop();}}},_callee);}));return function loadMore(_x){return _ref.apply(this,arguments);};}();var setCategory=function setCategory(category){setSelectedCategory(category);};var albums=props.albums,artists=props.artists,playlist=props.playlist;var result={albums:albums,artists:artists,playlist:playlist};return/*#__PURE__*/_jsx(React.Fragment,{children:isValidSession()?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsx(SearchForm,{handleSearch:handleSearch}),/*#__PURE__*/_jsx(Loader,{show:isLoading,children:\"Loading...\"}),/*#__PURE__*/_jsx(SearchResult,{result:result,loadMore:loadMore,setCategory:setCategory,selectedCategory:selectedCategory,isValidSession:isValidSession})]}):/*#__PURE__*/_jsx(Redirect,{to:{pathname:'/',state:{session_expired:true}}})});};var mapStateToProps=function mapStateToProps(state){return{albums:state.albums,artists:state.artists,playlist:state.playlist};};export default connect(mapStateToProps)(Dashboard);","map":{"version":3,"sources":["G:/boardinfinity-task/board-infinity-task/src/components/Dashboard.js"],"names":["React","useState","initiateGetResult","initiateLoadMoreAlbums","initiateLoadMorePlaylist","initiateLoadMoreArtists","connect","Redirect","SearchResult","SearchForm","Header","Loader","Dashboard","props","isLoading","setIsLoading","selectedCategory","setSelectedCategory","isValidSession","history","handleSearch","searchTerm","dispatch","then","push","pathname","state","session_expired","loadMore","type","albums","artists","playlist","next","setCategory","category","result","mapStateToProps"],"mappings":"iXAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,KAAgC,OAAhC,CAEA,OACEC,iBADF,CAEEC,sBAFF,CAGEC,wBAHF,CAIEC,uBAJF,KAKO,mBALP,CAMA,OAASC,OAAT,KAAwB,aAAxB,CACA,OAASC,QAAT,KAAyB,kBAAzB,CACA,MAAOC,CAAAA,YAAP,KAAyB,gBAAzB,CACA,MAAOC,CAAAA,UAAP,KAAuB,cAAvB,CACA,MAAOC,CAAAA,MAAP,KAAmB,UAAnB,CACA,MAAOC,CAAAA,MAAP,KAAmB,UAAnB,C,wFAEA,GAAMC,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,CAACC,KAAD,CAAW,eACOZ,QAAQ,CAAC,KAAD,CADf,wCACpBa,SADoB,eACTC,YADS,8BAEqBd,QAAQ,CAAC,QAAD,CAF7B,yCAEpBe,gBAFoB,eAEFC,mBAFE,kBAGnBC,CAAAA,cAHmB,CAGSL,KAHT,CAGnBK,cAHmB,CAGHC,OAHG,CAGSN,KAHT,CAGHM,OAHG,CAK3B,GAAMC,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAACC,UAAD,CAAgB,CACnC,GAAIH,cAAc,EAAlB,CAAsB,CACpBH,YAAY,CAAC,IAAD,CAAZ,CACAF,KAAK,CAACS,QAAN,CAAepB,iBAAiB,CAACmB,UAAD,CAAhC,EAA8CE,IAA9C,CAAmD,UAAM,CACvDR,YAAY,CAAC,KAAD,CAAZ,CACAE,mBAAmB,CAAC,QAAD,CAAnB,CACD,CAHD,EAID,CAND,IAMO,CACLE,OAAO,CAACK,IAAR,CAAa,CACXC,QAAQ,CAAE,GADC,CAEXC,KAAK,CAAE,CACLC,eAAe,CAAE,IADZ,CAFI,CAAb,EAMD,CACF,CAfD,CAiBA,GAAMC,CAAAA,QAAQ,0FAAG,iBAAOC,IAAP,8JACXX,cAAc,EADH,0BAELI,QAFK,CAEmCT,KAFnC,CAELS,QAFK,CAEKQ,OAFL,CAEmCjB,KAFnC,CAEKiB,MAFL,CAEaC,QAFb,CAEmClB,KAFnC,CAEakB,OAFb,CAEsBC,SAFtB,CAEmCnB,KAFnC,CAEsBmB,QAFtB,CAGbjB,YAAY,CAAC,IAAD,CAAZ,CAHa,YAILc,IAJK,6BAKN,QALM,iBAQN,SARM,iBAWN,UAXM,0CAMHP,CAAAA,QAAQ,CAACnB,sBAAsB,CAAC2B,OAAM,CAACG,IAAR,CAAvB,CANL,yEASHX,CAAAA,QAAQ,CAACjB,uBAAuB,CAAC0B,QAAO,CAACE,IAAT,CAAxB,CATL,2EAYHX,CAAAA,QAAQ,CAAClB,wBAAwB,CAAC4B,SAAQ,CAACC,IAAV,CAAzB,CAZL,oDAgBblB,YAAY,CAAC,KAAD,CAAZ,CAhBa,+BAkBbI,OAAO,CAACK,IAAR,CAAa,CACXC,QAAQ,CAAE,GADC,CAEXC,KAAK,CAAE,CACLC,eAAe,CAAE,IADZ,CAFI,CAAb,EAlBa,uDAAH,kBAARC,CAAAA,QAAQ,4CAAd,CA2BA,GAAMM,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,CAACC,QAAD,CAAc,CAChClB,mBAAmB,CAACkB,QAAD,CAAnB,CACD,CAFD,CAjD2B,GAqDnBL,CAAAA,MArDmB,CAqDWjB,KArDX,CAqDnBiB,MArDmB,CAqDXC,OArDW,CAqDWlB,KArDX,CAqDXkB,OArDW,CAqDFC,QArDE,CAqDWnB,KArDX,CAqDFmB,QArDE,CAsD3B,GAAMI,CAAAA,MAAM,CAAG,CAAEN,MAAM,CAANA,MAAF,CAAUC,OAAO,CAAPA,OAAV,CAAmBC,QAAQ,CAARA,QAAnB,CAAf,CAEA,mBACE,KAAC,KAAD,CAAO,QAAP,WACGd,cAAc,gBACb,oCACE,KAAC,MAAD,IADF,cAEE,KAAC,UAAD,EAAY,YAAY,CAAEE,YAA1B,EAFF,cAGE,KAAC,MAAD,EAAQ,IAAI,CAAEN,SAAd,wBAHF,cAIE,KAAC,YAAD,EACE,MAAM,CAAEsB,MADV,CAEE,QAAQ,CAAER,QAFZ,CAGE,WAAW,CAAEM,WAHf,CAIE,gBAAgB,CAAElB,gBAJpB,CAKE,cAAc,CAAEE,cALlB,EAJF,GADa,cAcb,KAAC,QAAD,EACE,EAAE,CAAE,CACFO,QAAQ,CAAE,GADR,CAEFC,KAAK,CAAE,CACLC,eAAe,CAAE,IADZ,CAFL,CADN,EAfJ,EADF,CA2BD,CAnFD,CAqFA,GAAMU,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,CAACX,KAAD,CAAW,CACjC,MAAO,CACLI,MAAM,CAAEJ,KAAK,CAACI,MADT,CAELC,OAAO,CAAEL,KAAK,CAACK,OAFV,CAGLC,QAAQ,CAAEN,KAAK,CAACM,QAHX,CAAP,CAKD,CAND,CAQA,cAAe1B,CAAAA,OAAO,CAAC+B,eAAD,CAAP,CAAyBzB,SAAzB,CAAf","sourcesContent":["import React, { useState } from 'react';\n\nimport {\n  initiateGetResult,\n  initiateLoadMoreAlbums,\n  initiateLoadMorePlaylist,\n  initiateLoadMoreArtists\n} from '../actions/result';\nimport { connect } from 'react-redux';\nimport { Redirect } from 'react-router-dom';\nimport SearchResult from './SearchResult';\nimport SearchForm from './SearchForm';\nimport Header from './Header';\nimport Loader from './Loader';\n\nconst Dashboard = (props) => {\n  const [isLoading, setIsLoading] = useState(false);\n  const [selectedCategory, setSelectedCategory] = useState('albums');\n  const { isValidSession, history } = props;\n\n  const handleSearch = (searchTerm) => {\n    if (isValidSession()) {\n      setIsLoading(true);\n      props.dispatch(initiateGetResult(searchTerm)).then(() => {\n        setIsLoading(false);\n        setSelectedCategory('albums');\n      });\n    } else {\n      history.push({\n        pathname: '/',\n        state: {\n          session_expired: true\n        }\n      });\n    }\n  };\n\n  const loadMore = async (type) => {\n    if (isValidSession()) {\n      const { dispatch, albums, artists, playlist } = props;\n      setIsLoading(true);\n      switch (type) {\n        case 'albums':\n          await dispatch(initiateLoadMoreAlbums(albums.next));\n          break;\n        case 'artists':\n          await dispatch(initiateLoadMoreArtists(artists.next));\n          break;\n        case 'playlist':\n          await dispatch(initiateLoadMorePlaylist(playlist.next));\n          break;\n        default:\n      }\n      setIsLoading(false);\n    } else {\n      history.push({\n        pathname: '/',\n        state: {\n          session_expired: true\n        }\n      });\n    }\n  };\n\n  const setCategory = (category) => {\n    setSelectedCategory(category);\n  };\n\n  const { albums, artists, playlist } = props;\n  const result = { albums, artists, playlist };\n\n  return (\n    <React.Fragment>\n      {isValidSession() ? (\n        <div>\n          <Header />\n          <SearchForm handleSearch={handleSearch} />\n          <Loader show={isLoading}>Loading...</Loader>\n          <SearchResult\n            result={result}\n            loadMore={loadMore}\n            setCategory={setCategory}\n            selectedCategory={selectedCategory}\n            isValidSession={isValidSession}\n          />\n        </div>\n      ) : (\n        <Redirect\n          to={{\n            pathname: '/',\n            state: {\n              session_expired: true\n            }\n          }}\n        />\n      )}\n    </React.Fragment>\n  );\n};\n\nconst mapStateToProps = (state) => {\n  return {\n    albums: state.albums,\n    artists: state.artists,\n    playlist: state.playlist\n  };\n};\n\nexport default connect(mapStateToProps)(Dashboard);\n"]},"metadata":{},"sourceType":"module"}